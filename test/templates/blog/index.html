{% extends 'base.html' %}

{% block header %}
<h1 id="posts_header">{% block title %}All Posts{% endblock %}</h1>
{% if session.get("username", None) %}
<a id="new_post" href="{{ url_for('blog.create_post') }}">New</a>
{% endif %}

{% endblock %}


{% block content %}
<section id="post">
  {% for post_id in posts %}
    <article class="post_title">
      <h1>{{ posts[post_id]['title'] }}</h1>
      <p class="about">
        by <span class="underlined">{{ posts[post_id]['author'] }}</span> on {{ posts[post_id]['created'] }}
      </p>
      {% if session.get("current_user", None) == posts[post_id]['author_email'] %}
    <a class="action" href="{{ url_for('blog.update_post', post_id=post_id) }}">
      Edit
    </a>
    {% endif %}
    </article>
    <hr>
    <p class="body">{{ posts[post_id]['body'] }}</p>
  {% if not loop.last %}
  <hr>
</section>
{% endif %}
{% endfor %}
{% endblock %}